<%- include('partials/header') %>

    <!-- Modern Tracking Hero -->
    <section class="hero-modern" style="min-height: 400px;">
        <div class="hero-gradient"></div>
        <div class="container">
            <div class="hero-modern-content" style="text-align: center;">
                <div class="hero-text" style="max-width: 700px; margin: 0 auto;">
                    <h1 style="margin-bottom: 1rem;">Real-Time Shipment Tracking</h1>
                    <p style="font-size: 1.1rem; margin-bottom: 3rem;">Track your cargo from warehouse to doorstep. Get instant updates on location, status, and estimated delivery.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Modern Tracking Form -->
    <section class="section-padding" style="background: #f8fafc;">
        <div class="container">
            <div class="tracking-form-card">
                <form action="/tracking" method="GET" class="tracking-form-modern-full">
                    <div class="form-group" style="margin: 0;">
                        <input type="text" id="trackingId" name="id" class="form-control" placeholder="Enter your tracking ID (e.g., TRK-12345)" value="<%= typeof trackingId !== 'undefined' ? trackingId : '' %>" required>
                        <button type="submit" class="btn btn-primary"><i class="fas fa-search"></i> Track Shipment</button>
                    </div>
                </form>
            </div>

            <% if (typeof shipment !== 'undefined' && shipment) { %>
                <!-- Modern Tracking Result -->
                <div class="tracking-result">
                    <!-- Header -->
                    <div class="tracking-header-card">
                        <div class="tracking-id-section">
                            <h2>Tracking ID</h2>
                            <p class="tracking-id">
                                <%= shipment.tracking_number %>
                            </p>
                        </div>
                        <div class="status-section">
                            <span class="status-badge-modern <%= shipment.status === 'Delivered' ? 'delivered' : shipment.status === 'In Transit' ? 'transit' : 'pending' %>">
                                <i class="fas <%= shipment.status === 'Delivered' ? 'fa-check-circle' : shipment.status === 'In Transit' ? 'fa-shipping-fast' : 'fa-clock' %>"></i>
                                <%= shipment.status %>
                            </span>
                        </div>
                    </div>

                    <!-- Progress Timeline -->
                    <div class="tracking-progress">
                        <h3 style="margin-bottom: 2rem;">Shipment Progress</h3>
                        <div class="progress-timeline">
                            <div class="progress-step">
                                <div class="progress-circle <%= shipment.status !== '' ? 'active' : '' %>">
                                    <i class="fas fa-box"></i>
                                </div>
                                <div class="progress-label">
                                    <p class="step-title">Booked</p>
                                    <p class="step-date">Order Received</p>
                                </div>
                            </div>
                            <div class="progress-connector <%= shipment.status === 'In Transit' || shipment.status === 'Delivered' ? 'active' : '' %>"></div>
                            <div class="progress-step">
                                <div class="progress-circle <%= shipment.status === 'In Transit' || shipment.status === 'Delivered' ? 'active' : '' %>">
                                    <i class="fas fa-truck"></i>
                                </div>
                                <div class="progress-label">
                                    <p class="step-title">In Transit</p>
                                    <p class="step-date">Currently Moving</p>
                                </div>
                            </div>
                            <div class="progress-connector <%= shipment.status === 'Delivered' ? 'active' : '' %>"></div>
                            <div class="progress-step">
                                <div class="progress-circle <%= shipment.status === 'Delivered' ? 'active' : '' %>">
                                    <i class="fas fa-check"></i>
                                </div>
                                <div class="progress-label">
                                    <p class="step-title">Delivered</p>
                                    <p class="step-date">Destination Reached</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Shipment Details Grid -->
                    <div class="tracking-details">
                        <h3 style="margin-bottom: 2rem;">Shipment Details</h3>
                        <div class="details-grid">
                            <div class="detail-card">
                                <div class="detail-icon">
                                    <i class="fas fa-map-pin"></i>
                                </div>
                                <div class="detail-content">
                                    <p class="detail-label">Origin</p>
                                    <p class="detail-value">
                                        <%= shipment.origin %>
                                    </p>
                                </div>
                            </div>
                            <div class="detail-card">
                                <div class="detail-icon">
                                    <i class="fas fa-flag-checkered"></i>
                                </div>
                                <div class="detail-content">
                                    <p class="detail-label">Destination</p>
                                    <p class="detail-value">
                                        <%= shipment.destination %>
                                    </p>
                                </div>
                            </div>
                            <div class="detail-card">
                                <div class="detail-icon">
                                    <i class="fas fa-location-arrow"></i>
                                </div>
                                <div class="detail-content">
                                    <p class="detail-label">Current Location</p>
                                    <p class="detail-value">
                                        <%= shipment.current_location || 'Updating...' %>
                                    </p>
                                </div>
                            </div>
                            <div class="detail-card">
                                <div class="detail-icon">
                                    <i class="fas fa-calendar-check"></i>
                                </div>
                                <div class="detail-content">
                                    <p class="detail-label">Est. Delivery</p>
                                    <p class="detail-value">
                                        <%= shipment.estimated_delivery || 'Calculating...' %>
                                    </p>
                                </div>
                            </div>
                            <div class="detail-card">
                                <div class="detail-icon">
                                    <i class="fas fa-user"></i>
                                </div>
                                <div class="detail-content">
                                    <p class="detail-label">Sender</p>
                                    <p class="detail-value">
                                        <%= shipment.sender_name %>
                                    </p>
                                </div>
                            </div>
                            <div class="detail-card">
                                <div class="detail-icon">
                                    <i class="fas fa-user-check"></i>
                                </div>
                                <div class="detail-content">
                                    <p class="detail-label">Receiver</p>
                                    <p class="detail-value">
                                        <%= shipment.receiver_name %>
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Actions -->
                    <div class="tracking-actions">
                        <a href="/tracking" class="btn btn-secondary"><i class="fas fa-search"></i> Track Another</a>
                        <a href="/quote" class="btn btn-primary"><i class="fas fa-paper-plane"></i> Send a Package</a>
                    </div>
                </div>
                <% } else if (typeof trackingId !== 'undefined' && trackingId && !shipment) { %>
                    <!-- Not Found State -->
                    <div class="not-found-card">
                        <div class="not-found-icon">
                            <i class="fas fa-inbox"></i>
                        </div>
                        <h2>Shipment Not Found</h2>
                        <p>We couldn't find a shipment with tracking ID: <span class="tracking-id"><%= trackingId %></span></p>
                        <p class="hint">Please check the tracking ID and try again, or contact our support team.</p>
                        <a href="/tracking" class="btn btn-primary"><i class="fas fa-search"></i> Try Again</a>
                    </div>
                    <% } else { %>
                        <!-- Placeholder State -->
                        <div class="tracking-placeholder">
                            <div class="placeholder-icon">
                                <i class="fas fa-box-open"></i>
                            </div>
                            <p>Enter your tracking ID above to get started</p>
                        </div>
                        <% } %>
        </div>
    </section>

    <%- include('partials/footer') %>